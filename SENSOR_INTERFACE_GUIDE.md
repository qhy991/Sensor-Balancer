# 简单传感器界面使用指南

## 概述
这是一个简化的传感器连接和热力图显示界面，基于原始代码简化，专注于传感器连接和原始数据显示。

## 功能特性

### ✅ 已实现功能
1. **传感器选择**：支持选择传感器ID（0-9）
2. **端口配置**：支持文本输入端口号（默认：0）
3. **实时热力图显示**：16x16或64x64传感器数据可视化
4. **数据信息显示**：最大值、最小值、平均值
5. **连接状态管理**：实时显示连接状态
6. **错误处理**：完善的错误提示和异常处理

### 🔧 技术实现
- **数据处理器**：使用 `box-demo copy` 目录中的 `DataHandler`
- **USB驱动**：使用 `LargeUsbSensorDriver` 支持64x64传感器
- **路径管理**：自动添加 `box-demo copy` 到Python路径
- **模块导入**：智能处理模块导入失败的情况

## 使用方法

### 1. 启动界面
```bash
python simple_sensor_interface.py
```

### 2. 连接传感器
1. **选择传感器ID**：在"传感器"下拉框中选择传感器ID（0-9）
2. **输入端口号**：在"端口"文本框中输入端口号（默认：0）
3. **点击开始**：点击"开始"按钮连接传感器

### 3. 查看数据
- **热力图**：实时显示传感器数据的热力图
- **数据信息**：显示当前帧的最大值、最小值、平均值
- **状态信息**：显示连接状态和传感器ID

### 4. 停止连接
- 点击"停止"按钮断开传感器连接

## 端口配置说明

### 端口号格式
- **数字端口**：如 "0", "1", "2" 等
- **COM端口**：如 "COM3", "COM4" 等
- **Linux设备**：如 "/dev/ttyUSB0" 等

### 默认配置
- **传感器ID**：0（第一个传感器）
- **端口号**：0（第一个USB设备）

## 系统要求

### 必需模块
- PyQt5
- numpy
- pyqtgraph
- pyusb

### 可选模块
- data_processing（来自box-demo copy）
- backends（来自box-demo copy）
- interfaces（来自box-demo copy）

## 故障排除

### 1. 模块导入失败
**问题**：`No module named 'data_processing'`
**解决方案**：
- 确保 `box-demo copy` 目录存在
- 检查目录结构是否正确
- 程序会自动添加路径，无需手动配置

### 2. 传感器连接失败
**问题**：显示"连接失败"状态
**解决方案**：
- 检查USB设备是否正确连接
- 尝试不同的端口号（0, 1, 2等）
- 检查设备驱动程序是否正确安装

### 3. 模拟模式
**问题**：总是显示"模拟模式"
**原因**：
- 真实传感器模块未找到
- USB设备未连接
- 驱动程序问题

**解决方案**：
- 确保传感器硬件正确连接
- 检查USB驱动安装
- 尝试不同的端口号

## 代码结构

### 主要文件
- `simple_sensor_interface.py`：主界面文件
- `box-demo copy/`：传感器驱动和数据处理模块

### 关键类
- `SimpleSensorInterface`：主界面类
- `DataHandler`：数据处理器
- `LargeUsbSensorDriver`：USB传感器驱动

### 主要方法
- `start_sensor()`：开始传感器连接
- `stop_sensor()`：停止传感器连接
- `update_data()`：更新数据显示
- `update_heatmap()`：更新热力图

## 开发说明

### 添加新功能
1. 在 `SimpleSensorInterface` 类中添加新方法
2. 在 `init_ui()` 中添加UI组件
3. 在相应的事件处理函数中添加逻辑

### 修改传感器配置
1. 修改 `sensor_combo` 的选项
2. 调整 `init_data_handler()` 中的初始化参数
3. 更新连接逻辑中的参数处理

### 自定义数据处理
1. 修改 `update_data()` 方法
2. 调整 `update_heatmap()` 中的数据处理逻辑
3. 添加新的数据可视化组件

## 版本信息
- **当前版本**：1.0
- **最后更新**：2024年
- **兼容性**：Windows 10/11, Python 3.7+

## 联系信息
如有问题或建议，请检查：
1. 硬件连接是否正确
2. 驱动程序是否安装
3. Python环境是否完整
4. 模块路径是否正确 