# 传感器敏感性标定程序

## 概述

这是一个专门用于传感器敏感性标定的程序，通过载入现有的校准数据，使用不同质量的砝码对传感器进行标定，计算压力总和来评估传感器的敏感性。

## 主要功能

### 1. 校准数据加载
- 支持多种格式：JSON、NumPy (.npy)、CSV
- 自动识别校准数据格式
- 显示校准数据基本信息

### 2. 砝码管理
- 添加不同质量的砝码
- 支持多种单位：g、kg、mg
- 自动计算砝码对应的力（N）

### 3. 敏感性测量
- 实时传感器数据显示
- 自动记录测量数据
- 可设置测量次数
- 实时显示测量进度

### 4. 敏感性计算
- 计算总压力、平均压力、最大压力
- 计算传感器敏感性（压力/力）
- 计算变异系数
- 整体敏感性分析

### 5. 结果分析
- 生成详细的分析报告（文本/HTML）
- 绘制敏感性曲线图
- 质量评估和建议

## 使用步骤

### 第一步：启动程序
```bash
python sensor_sensitivity_calibration.py
```

### 第二步：连接传感器
1. 选择传感器ID和端口
2. 点击"开始"按钮连接传感器
3. 确认传感器状态显示为"已连接"

### 第三步：加载校准数据
1. 切换到"敏感性标定"标签页
2. 点击"加载校准数据"按钮
3. 选择之前保存的校准数据文件
4. 确认校准数据已加载

### 第四步：添加砝码
1. 在"砝码管理"区域输入砝码信息：
   - 砝码ID（如：W1、W2、W3）
   - 质量值
   - 质量单位
2. 点击"添加砝码"按钮
3. 重复添加所有需要使用的砝码

### 第五步：进行测量
1. 在"测量控制"区域选择要测量的砝码
2. 设置测量次数（建议10-20次）
3. 将选定的砝码放置在传感器上
4. 点击"开始测量"按钮
5. 等待测量完成
6. 更换下一个砝码，重复测量

### 第六步：计算敏感性
1. 完成所有砝码的测量后
2. 点击"计算敏感性"按钮
3. 查看标定结果表格
4. 查看整体敏感性分析结果

### 第七步：保存结果
1. 点击"保存结果"按钮
2. 选择保存格式（JSON/CSV/文本）
3. 选择保存位置

### 第八步：分析结果（可选）
1. 切换到"敏感性分析"标签页
2. 加载之前保存的标定结果
3. 生成分析报告
4. 绘制敏感性曲线图

## 数据格式说明

### 校准数据格式
- **JSON格式**：包含calibration_map和reference_data
- **NumPy格式**：直接存储校准映射数组
- **CSV格式**：二维数组格式的校准数据

### 标定结果格式
- **JSON格式**：包含完整的标定信息
- **CSV格式**：表格形式的标定结果
- **文本格式**：可读性好的报告格式

## 敏感性指标说明

### 1. 总压力敏感性
- 定义：总压力 / 砝码重力
- 单位：无量纲
- 意义：反映传感器对总压力的敏感程度

### 2. 平均压力敏感性
- 定义：平均压力 / 砝码重力
- 单位：无量纲
- 意义：反映传感器对平均压力的敏感程度

### 3. 变异系数
- 定义：标准差 / 平均值
- 单位：无量纲
- 意义：反映测量的一致性，越小越好

### 4. 质量评估标准
- 优秀：变异系数 < 0.1
- 良好：变异系数 < 0.2
- 一般：变异系数 < 0.3
- 较差：变异系数 ≥ 0.3

## 注意事项

1. **校准数据**：确保使用正确的校准数据，校准数据质量直接影响标定结果
2. **砝码放置**：砝码应均匀放置在传感器表面，避免偏置
3. **环境稳定**：测量过程中保持环境稳定，避免振动和温度变化
4. **测量次数**：建议每个砝码测量10-20次，以获得可靠的统计结果
5. **数据保存**：及时保存标定结果，避免数据丢失

## 故障排除

### 传感器连接失败
- 检查端口设置是否正确
- 确认传感器驱动程序已安装
- 尝试重新插拔USB连接

### 校准数据加载失败
- 检查文件格式是否正确
- 确认文件路径没有特殊字符
- 验证校准数据文件完整性

### 测量数据异常
- 检查传感器是否正常工作
- 确认砝码放置是否正确
- 验证环境条件是否稳定

## 技术支持

如有问题，请检查：
1. Python环境是否正确安装
2. 依赖库是否完整（PyQt5、matplotlib、numpy等）
3. 传感器驱动程序是否正常
4. 校准数据文件是否有效

## 版本信息

- 版本：1.0
- 更新日期：2024年
- 支持系统：Windows、Linux、macOS
- Python版本：3.7+ 